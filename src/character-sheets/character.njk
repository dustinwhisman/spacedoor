---
title: Character
layout: layouts/sidebar.njk
---

<div class="stack" data-character-sheet></div>

<script type="module">
  import { getFromDb } from '../../scripts/db.mjs';

  let character;
  const getCharacter = async () => {
    const urlParams = new URLSearchParams(window.location.search);
    const key = urlParams.has('key') && urlParams.get('key');

    if (!key) {
      window.location.href = '/character-sheets';
    }

    character = await getFromDb('characters', key);
    const characterSheetTemplate = `
      <h2>${character.name}</h2>
      <div>
        <p>${character.race}</p>
        <p>${character.class}: ${character.subclass}</p>
        <p>Level ${character.level}</p>
      </div>
      <div>
        <p>Charm:</p>
        <p>Cool:</p>
        <p>Sharp:</p>
        <p>Tough:</p>
        <p>Technobabble:</p>
      </div>
      <div>
        <p>Health: ${character.currentHealth} / ${character.maxHealth}</p>
        <p>Stamina: ${character.currentStamina} / ${character.maxStamina}</p>
      </div>
      <div>
        <p>Experience: ${character.experience}</p>
        <p>Luck Points: ${character.luck}</p>
      </div>
      <h3>Feats</h3>
    `;
    const sheetElement = document.querySelector(`[data-character-sheet]`);
    sheetElement.innerHTML = characterSheetTemplate;
  };

  getCharacter();
</script>
