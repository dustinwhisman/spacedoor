---
title: Add Character
layout: layouts/sidebar.njk
---

<div class="stack">
  <h2>
    Log In or Sign Up
  </h2>

  <p>
    Passwords aren't necessary here. Enter your email, and you'll be sent a link
    to click that will log you in. If you don't have an account yet, one will be
    created for you when you click the link in your email.
  </p>

  <form class="stack">
    <div>
      <label for="email">
        Email
      </label>
      <input type="email" id="email" inputmode="email" autocapitalize="off" name="email">
    </div>
    <div>
      <button type="submit">
        Request Email
      </button>
    </div>
  </form>
</div>

<script>
  document.addEventListener('submit', (event) => {
    event.preventDefault();
    const email = event.target.elements.email.value;
    firebase.auth().sendSignInLinkToEmail(email, {
      url: `${window.location.origin}/login/confirm`,
      handleCodeInApp: true,
    })
      .then(() => {
        localStorage.setItem('emailForSignIn', email);
        window.location.href = '/login/awaiting-login-confirmation';
      })
      .catch(console.error);
  });
</script>
